$(document).ready(function(){$(".nav ul li").mouseover(function(){var t=this.offsetWidth,i=this.offsetLeft;$("#nav-line").fadeIn(200).css({width:t,left:i})}),$(".top-nav").mouseleave(function(t){$("#nav-line").fadeOut(20)}),$("#shopCar-b").click(function(){$("#price").html("$0.00"),$("#pro_num").html("0"),console.log(1)});var t=$(".top-banner ul li").eq(0).width(),i=0,n=0;$(".top-banner ul li").each(function(){$(".top-banner ol").append("<li></li>")}).eq(0).clone(!0).appendTo(".top-banner ul"),$(".top-banner ol li").eq(0).addClass("current");var e=$(".top-banner ul li").length;$(".top-banner ol li").on("mouseenter",function(){$(this).addClass("current").siblings("li").removeClass("current");var e=$(this).index();i=n=e,$(".top-banner ul").animate({left:-e*t+"px"},600,"swing")}),$(".arrow-r").on("click",function(){a()}),$(".arrow-l").on("click",function(){n--,--i<0&&($(".top-banner ul").css({left:-(e-1)*t+"px"}),i=e-2),n<0&&(n=e-2),$(".top-banner ol li").eq(n).addClass("current").siblings("li").removeClass("current"),$(".top-banner ul").animate({left:-i*t+"px"},"swing")}),clearInterval(o);var o=setInterval(a,5e3);function a(){n++,++i>e-1&&(i=1,$(".top-banner ul").css({left:"0"})),n>e-2&&(n=0),$(".top-banner ol li").eq(n).addClass("current").siblings("li").removeClass("current"),$(".top-banner ul").animate({left:-i*t},"swing")}$(".top-banner").mouseenter(function(){$(".arrow-r").fadeIn(1e3),$(".arrow-l").fadeIn(1e3),clearInterval(o)}).mouseleave(function(){$(".arrow-r").fadeOut(1e3),$(".arrow-l").fadeOut(1e3),o=setInterval(a,5e3)});var l="easeOutBounce",s="jswing",r=1e3,c=300,d=-1*Math.round($(".pro_item ol li").width()/2),f=-1*Math.round($(".pro_item ol li").height()/2),h=-1*d,p=2*h,u=-1*f;$(".pro_item ol li").each(function(){var t=$(this).find("img").attr("src");$("img",this).remove(),$(this).append('<div class="topLeft"></div><div class="topRight"></div><div class="bottomLeft"></div><div class="bottomRight"></div>'),$(this).children("div").css("background-image","url("+t+")"),$(this).find("div.topLeft").css({top:0,left:0,width:h,height:u}),$(this).find("div.topRight").css({top:0,left:h,width:h,height:u}),$(this).find("div.bottomLeft").css({bottom:0,left:0,width:h,height:u}),$(this).find("div.bottomRight").css({bottom:0,left:h,width:h,height:u})}).hover(function(){$(this).find("div.topLeft").stop(!1,!0).animate({top:d,left:d},{duration:c,easing:s}),$(this).find("div.topRight").stop(!1,!0).animate({top:d,left:p},{duration:c,easing:s}),$(this).find("div.bottomLeft").stop(!1,!0).animate({bottom:d,left:d},{duration:c,easing:s}),$(this).find("div.bottomRight").stop(!1,!0).animate({bottom:d,left:p},{duration:c,easing:s})},function(){$(this).find("div.topLeft").stop(!1,!0).animate({top:0,left:0},{duration:r,easing:l}),$(this).find("div.topRight").stop(!1,!0).animate({top:0,left:h},{duration:r,easing:l}),$(this).find("div.bottomLeft").stop(!1,!0).animate({bottom:0,left:0},{duration:r,easing:l}),$(this).find("div.bottomRight").stop(!1,!0).animate({bottom:0,left:h},{duration:r,easing:l})}).click(function(){window.location=$(this).find("a").attr("href")}),function(){var t=$(".pro_item ol"),i=$(".pro_item ol li").eq(0).width()+50,n=null,e=0;function o(){t.css("transition","all 1s")}function a(){t.css("transition","")}function l(i){t.css("transform","translateX("+i+"px)")}function s(){e++,o(),l(e*i*-1)}clearInterval(n),n=setInterval(s,2e3),$(".arrow-right").click(function(){clearInterval(n),s()}),$(".arrow-left").click(function(){clearInterval(n),e--,o(),l(e*i*-1)}),t.on("webkitTransitionEnd",function(){console.log(e),e>6?(e=1,a(),l(e*i*-1)):e<1&&(e=6,a(),l(e*i*-1))}),t.mouseenter(function(){clearInterval(n)}).mouseleave(function(){n=setInterval(s,2e3)})}(),$(".pro-main li.item").click(function(){$(this).next("div").slideToggle(),console.log($(this).index())}),$("#gun label").on("click",function(){return"block"===$(this).children("b").css("display")?($(this).children("b").css("display","none"),!1):($(this).children("b").css("display","block"),!1)});var m=!1,v=0,g=0,b=0;$(".pro-main .line-btn").mousedown(function(t){v=t.pageX-g,m=!0}),$(document).mouseup(function(){m=!1}),$(".pro-main .line").mousemove(function(t){m&&((g=t.pageX-v)<0?g=0:g>$(this).width()&&(g=$(this).width()),$(".pro-main .line-btn").css("left",g),$(".pro-main .line-in").width(g))}).click(function(t){m||(b=$(".pro-main .line-in").offset().left,(g=t.pageX-b)<0?g=0:g>$(this).width()&&(g=$(this).width()),$(".pro-main .line-btn").css("left",g),$(".pro-main .line-in").width(g))}),$(".add").click(function(){var t=parseFloat($(this).siblings(".pro").html().slice(1)),i=parseFloat($(this).siblings("input[type='text']").val()?$(this).siblings("input[type='text']").val():0),n=parseFloat(t*i)+parseFloat($("#price").html().slice(1));$("#price").html("$"+n.toFixed(2));var e=i+parseFloat($("#pro_num").html());$("#pro_num").html(e)}),$.fn.extend({waterfall:function(){for(var t=$(this).width(),i=$(this).children(".item").width(),n=Math.floor(t/i),e=(t-i*n)/(n-1),o=[],a=0;a<n;a++)o[a]=e;$(this).children(".item").each(function(t,n){for(var a=$(n).height(),l=0,s=o[0],r=0;r<o.length;r++)o[r]<s&&(s=o[r],l=r);$(n).css({top:s,left:l*i+l*e}),s+=a,s+=e,o[l]=s});var l=o[0];for(a=0;a<o.length;a++)o[a]>l&&(l=o[a]);$(this).height(l)}}),$("#temp").click(function(){$.ajax({url:"./others/waterfall.php",type:"get",dataType:"json",success:function(t){var i=template("template",{items:t});$(".wrapper #items").append(i),$("#items").waterfall()}})})});